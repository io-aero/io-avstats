<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Data Sources &#8212; Python 24-3-22 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=dff755f8"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PostgreSQL Administration" href="db_administration.html" />
    <link rel="prev" title="Advanced Usage" href="advanced_usage.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="data-sources">
<h1>Data Sources<a class="headerlink" href="#data-sources" title="Link to this heading">¶</a></h1>
<section id="id1">
<h2><a class="reference external" href="https://www.ntsb.gov/safety/data/Documents/datafiles/OccurrenceCategoryDefinitions.pdf">AVIATION OCCURRENCE CATEGORIES</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>The CICTT codes used in the <strong>`Aviation_Occurrence_Categories/aviation_occurrence_categories.xlsx`</strong> file is taken from <a class="reference external" href="https://www.ntsb.gov/safety/data/Documents/datafiles/OccurrenceCategoryDefinitions.pdf">this document</a>.</p>
<img alt="_images/aviation_occurrence_categories_pdf.png" src="_images/aviation_occurrence_categories_pdf.png" />
</section>
<section id="cictt-soe-map-csv">
<h2>CICTT_SOE_MAP.csv<a class="headerlink" href="#cictt-soe-map-csv" title="Link to this heading">¶</a></h2>
<p>The content of the database table <cite>io_sequence_of_events</cite> is created based on this csv file.</p>
<img alt="_images/CICTT_SOE_MAP.png" src="_images/CICTT_SOE_MAP.png" />
</section>
<section id="id2">
<h2><a class="reference external" href="https://adds-faa.opendata.arcgis.com/datasets/faa::airports-1/explore?location=0.158824%2C-1.633886%2C2.00">FAA Airports</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>The FAA provides data on airports in the United States in the form of a csv file.
This data is updated by the FAA at irregular intervals.</p>
<img alt="_images/FAA_Airports.png" src="_images/FAA_Airports.png" />
</section>
<section id="id3">
<h2><a class="reference external" href="https://adds-faa.opendata.arcgis.com/datasets/faa::runways/explore?location=0.059024%2C-1.628764%2C2.00">FAA Runways</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<p>The FAA provides data on runways in the United States in the form of a csv file.
This data is updated by the FAA at irregular intervals.</p>
<img alt="_images/FAA_Runways.png" src="_images/FAA_Runways.png" />
</section>
<section id="id4">
<h2><a class="reference external" href="https://www.geodatos.net/en">geodatos</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<p>The decimal latitude and longitude for the USA used in the <strong>`Countries_States/countries_states.json`</strong> file is taken from the <a class="reference external" href="https://www.geodatos.net/en/coordinates/united-states">geodatos website</a>.</p>
<img alt="_images/geodatos.png" src="_images/geodatos.png" />
</section>
<section id="id5">
<h2><a class="reference external" href="https://www.faa.gov/airports/planning_capacity/npias/current">National Plan of Integrated Airport Systems (NPIAS)</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h2>
<p>The FAA provides data on preferred airports in the United States in the form of an MS Excel file.
This data is updated by the FAA at irregular intervals.</p>
<img alt="_images/FAA_NPIAS.png" src="_images/FAA_NPIAS.png" />
</section>
<section id="id6">
<h2><a class="reference external" href="https://www.ntsb.gov/Pages/home.aspx">NTSB</a><a class="headerlink" href="#id6" title="Link to this heading">¶</a></h2>
<p>The main data used in <strong>IO-AVSTATS</strong> is provided by the National Transportation Safety Board.
On the accident data page is the link <a class="reference external" href="https://www.ntsb.gov/safety/data/Pages/Data_Stats.aspx">Downloadable data sets</a>, which contains the aviation accident data in MS Access format for free download.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>File</p></th>
<th class="head"><p>Created (mm/dd/yyyy)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>avall.zip</cite></p></td>
<td><p>current</p></td>
<td><p>Data from January 1, 2008 to today</p></td>
</tr>
<tr class="row-odd"><td><p><cite>PRE1982.zip</cite></p></td>
<td><p>10/27/2020</p></td>
<td><p>unknown</p></td>
</tr>
<tr class="row-even"><td><p><cite>Pre2008.zip</cite></p></td>
<td><p>09/30/2020</p></td>
<td><p>Data from January 1, 1982 to December 31, 2007</p></td>
</tr>
<tr class="row-odd"><td><p><cite>upDDMON.zip</cite></p></td>
<td><p>current</p></td>
<td><p>New additions and updates until DD day in the month MON</p></td>
</tr>
</tbody>
</table>
<p>The schemas of the two databases <cite>avall</cite> and <cite>Pre2008</cite> are identical except for the two new optional columns <cite>dec_latitude</cite> and <cite>dec_longitude</cite> in the database table <cite>events</cite> of the database <cite>avall</cite>.</p>
<section id="database-schema-comparison">
<h3>Database Schema Comparison<a class="headerlink" href="#database-schema-comparison" title="Link to this heading">¶</a></h3>
<p>Before any new <strong>NTSB</strong> data set can be processed, the database schema of the new data set must first be compared with the database schema of the previous version of the <strong>NTSB</strong> data set <cite>avall.mdb</cite>.</p>
<p>Procedure:</p>
<ul class="simple">
<li><p>The RazorSQL program is started.</p></li>
<li><p>Under ‘Connections’ select ‘Add Connection Profile’.</p></li>
<li><p>Select <cite>MS Access</cite> under <cite>Add Connection Profile</cite>.</p></li>
<li><p><cite>Connection Type</cite> is ODBC (Direct).</p></li>
<li><p>In addition, an entry must be made at <cite>Connection Profile Name</cite> and <cite>Database File</cite>:
- Connection Profile Name: IO-AVSTATS
- Database File: IO-AVSTATS.mdb</p></li>
<li><p>After pressing the <cite>CONNECT</cite> button you will be connected to the selected MS Access database.</p></li>
</ul>
<img alt="_images/RazorSQL_Connection.png" src="_images/RazorSQL_Connection.png" />
<ul class="simple">
<li><p>After opening the database, a SQL script with the DDL statements can be generated in the menu under <cite>DB Tools</cite> and <cite>Generate DDL</cite>.</p></li>
</ul>
<img alt="_images/RazorSQL_Generate_DDL.png" src="_images/RazorSQL_Generate_DDL.png" />
<ul class="simple">
<li><p>This SQL script can be saved as a file for further processing in the menu under <cite>File</cite> and <cite>Save As</cite>.</p></li>
</ul>
<p>In case of any discrepancy, these must be implemented into the existing PostgreSQL database.</p>
</section>
<section id="table-processing-order">
<h3>Table Processing Order<a class="headerlink" href="#table-processing-order" title="Link to this heading">¶</a></h3>
<p>Based on the foreign keys (FK) present in the database schema, the following processing sequence results when creating the database schema and loading or updating the database tables:</p>
<p>Level 1 - without FK
- events</p>
<p>Level 2 - FK: <cite>ev_id</cite>
- aircraft
- dt_events
- NTSB_Admin</p>
<p>Level 3 - FK: <cite>ev_id</cite> &amp; <cite>Aircraft_Key</cite>
- dt_aircraft
- engines
- Events_Sequence
- Findings
- Flight_Crew
- injury
- narratives
- Occurrences</p>
<p>Level 4 - FK: <cite>ev_id</cite> &amp; <cite>Aircraft_Key</cite> &amp; <cite>crew_no</cite>
- dt_Flight_Crew
- flight_time</p>
<p>Level 4 - FK: <cite>ev_id</cite> &amp; <cite>Aircraft_Key</cite> &amp; <cite>Occurrence_No</cite>
- seq_of_events</p>
</section>
<section id="issues">
<h3>Issues<a class="headerlink" href="#issues" title="Link to this heading">¶</a></h3>
<p>The problem database tables listed below are not included in the PostgreSQL database schema.</p>
<section id="empty-database-tables">
<h4>Empty database tables<a class="headerlink" href="#empty-database-tables" title="Link to this heading">¶</a></h4>
<p>The following database tables are included in the Entity Relationship Diagram (ERD), but they do not contain any data in the database:
- Occurrences
- seq_of_events</p>
</section>
<section id="legacy-database-tables">
<h4>Legacy database tables<a class="headerlink" href="#legacy-database-tables" title="Link to this heading">¶</a></h4>
<p>The following database tables are included in the database but are missing from the ERD:
- Country
- ct_iaids
- ct_seqevt
- eADMSPUB_DataDictionary
- states</p>
</section>
<section id="inconsistent-database-data-foreign-key">
<h4>Inconsistent database data - foreign key<a class="headerlink" href="#inconsistent-database-data-foreign-key" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>database table <cite>ntsb_admin</cite>: database table <cite>event</cite> has no row with <cite>ev_id</cite> = <cite>20210527103155</cite> (data source: <cite>avall.zip</cite>) - as a consequence, the foreign key to the events table had to be removed</p></li>
</ul>
</section>
<section id="inconsistent-database-data-country-usa-and-state">
<h4>Inconsistent database data - country USA and state<a class="headerlink" href="#inconsistent-database-data-country-usa-and-state" title="Link to this heading">¶</a></h4>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ev_state</span><span class="p">,</span>
<span class="w">       </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">ev_country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;USA&#39;</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">ev_state</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">state</span>
<span class="w">                         </span><span class="k">FROM</span><span class="w"> </span><span class="n">io_states</span><span class="w"> </span><span class="n">ius</span><span class="p">)</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ev_state</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ev_state</span>
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ev_state</p></th>
<th class="head"><p>count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AO</p></td>
<td><p>17</p></td>
</tr>
<tr class="row-odd"><td><p>CB</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>GM</p></td>
<td><p>45</p></td>
</tr>
<tr class="row-odd"><td><p>GU</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-even"><td><p>OF</p></td>
<td><p>14</p></td>
</tr>
<tr class="row-odd"><td><p>PO</p></td>
<td><p>15</p></td>
</tr>
<tr class="row-even"><td><p>PR</p></td>
<td><p>112</p></td>
</tr>
<tr class="row-odd"><td><p>UN</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p>VI</p></td>
<td><p>6</p></td>
</tr>
</tbody>
</table>
</section>
<section id="inconsistent-database-data-invalid-usa-latitude">
<h4>Inconsistent database data - invalid USA latitude<a class="headerlink" href="#inconsistent-database-data-invalid-usa-latitude" title="Link to this heading">¶</a></h4>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">io_lat_lng_issues</span>
<span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">io_dec_lat_lng_actions</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%ERROR.00.920%&#39;</span>
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>430</p></td>
</tr>
</tbody>
</table>
</section>
<section id="inconsistent-database-data-invalid-usa-longitude">
<h4>Inconsistent database data - invalid USA longitude<a class="headerlink" href="#inconsistent-database-data-invalid-usa-longitude" title="Link to this heading">¶</a></h4>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">io_lat_lng_issues</span>
<span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">io_dec_lat_lng_actions</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%ERROR.00.921%&#39;</span>
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>462</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id7">
<h2><a class="reference external" href="https://www.opendatasoft.com/?hsLang=en">opendatasoft</a><a class="headerlink" href="#id7" title="Link to this heading">¶</a></h2>
<p>The decimal latitudes and longitudes for the US states used in the <strong>`Countries_States/countries_states.json`</strong> file are taken from the <a class="reference external" href="https://public.opendatasoft.com/explore/dataset/us-state-boundaries/export/">opendatasoft website</a>.</p>
<img alt="_images/opendatasoft.png" src="_images/opendatasoft.png" />
</section>
<section id="id8">
<h2><a class="reference external" href="https://simplemaps.com/">simplemaps</a><a class="headerlink" href="#id8" title="Link to this heading">¶</a></h2>
<p>In order to fill in the missing decimal latitudes and longitudes, free available data from <strong>simplemaps</strong> is used.
simplemaps offers postal codes and cities with their latitude and longitude.</p>
<p>The <a class="reference external" href="https://simplemaps.com/data/us-zips">US Zip Codes Database</a> link provides latitude and longitude for selected US zip codes:</p>
<img alt="_images/uszips.png" src="_images/uszips.png" />
<p>The <a class="reference external" href="https://simplemaps.com/data/us-cities">United States Cities Database</a> link provides latitude and longitude for selected US cities:</p>
<img alt="_images/uscities.png" src="_images/uscities.png" />
</section>
<section id="id9">
<h2><a class="reference external" href="https://www.unitedstateszipcodes.org/">United States Zip Codes.org</a><a class="headerlink" href="#id9" title="Link to this heading">¶</a></h2>
<p>In order to fill in the missing decimal latitudes and longitudes, free available data from <strong>United States Zip Codes.org</strong> is used.
<strong>United States Zip Codes.org</strong> offers more complete postal codes but only with estimated latitudes and longitudes.</p>
<img alt="_images/zip_code_database.png" src="_images/zip_code_database.png" />
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Python</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_io_avstats.html">Configuration IO-AVSTATS</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_logging.html">Configuration Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_steps.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="db_administration.html">PostgreSQL Administration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data_master_logs.html">Master Data Logs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data_transaction_logs.html">Transaction Data Logs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">ioavstats</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">End-User License Agreement</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="advanced_usage.html" title="previous chapter">Advanced Usage</a></li>
      <li>Next: <a href="db_administration.html" title="next chapter">PostgreSQL Administration</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/data_sources.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>